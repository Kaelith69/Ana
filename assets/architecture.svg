<svg width="820" height="460" viewBox="0 0 820 460" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arr" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7C3AED"/>
    </marker>
    <marker id="arrCyan" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#06B6D4"/>
    </marker>
    <marker id="arrBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2563EB"/>
    </marker>
    <marker id="arrGray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748B"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="820" height="460" rx="14" fill="#0F0F1A"/>

  <!-- Layer label bands -->
  <rect x="10" y="36" width="800" height="70" rx="6" fill="#7C3AED" fill-opacity="0.05" stroke="#7C3AED" stroke-width="0.5" stroke-opacity="0.3"/>
  <rect x="10" y="120" width="800" height="90" rx="6" fill="#2563EB" fill-opacity="0.04" stroke="#2563EB" stroke-width="0.5" stroke-opacity="0.25"/>
  <rect x="10" y="228" width="800" height="100" rx="6" fill="#06B6D4" fill-opacity="0.04" stroke="#06B6D4" stroke-width="0.5" stroke-opacity="0.25"/>
  <rect x="10" y="344" width="800" height="100" rx="6" fill="#7C3AED" fill-opacity="0.04" stroke="#7C3AED" stroke-width="0.5" stroke-opacity="0.2"/>

  <!-- Layer labels -->
  <text x="22" y="55" font-family="monospace" font-size="9" fill="#7C3AED" opacity="0.7" font-weight="bold" letter-spacing="1">DISCORD LAYER</text>
  <text x="22" y="138" font-family="monospace" font-size="9" fill="#2563EB" opacity="0.7" font-weight="bold" letter-spacing="1">BOT CORE</text>
  <text x="22" y="246" font-family="monospace" font-size="9" fill="#06B6D4" opacity="0.7" font-weight="bold" letter-spacing="1">SERVICE LAYER</text>
  <text x="22" y="362" font-family="monospace" font-size="9" fill="#64748B" opacity="0.7" font-weight="bold" letter-spacing="1">EXTERNAL APIS</text>

  <!-- Title -->
  <text x="410" y="24" font-family="'Segoe UI', Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#E2E8F0">Ana — System Architecture</text>

  <!-- Discord Server node -->
  <rect x="310" y="46" width="200" height="50" rx="8" fill="#1E1E2E" stroke="#7C3AED" stroke-width="2"/>
  <text x="410" y="66" font-family="monospace" font-size="12" font-weight="bold" text-anchor="middle" fill="#7C3AED">Discord Server</text>
  <text x="410" y="84" font-family="monospace" font-size="10" text-anchor="middle" fill="#64748B">User messages &amp; commands</text>

  <!-- Arrow: Discord → main.py -->
  <line x1="410" y1="96" x2="410" y2="130" stroke="#7C3AED" stroke-width="2" marker-end="url(#arr)"/>

  <!-- main.py node -->
  <rect x="285" y="130" width="250" height="70" rx="8" fill="#1E1E2E" stroke="#2563EB" stroke-width="2"/>
  <text x="410" y="153" font-family="monospace" font-size="12" font-weight="bold" text-anchor="middle" fill="#2563EB">main.py</text>
  <text x="410" y="169" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">on_message · on_ready</text>
  <text x="410" y="183" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">!joke · !shutdown commands</text>

  <!-- Arrows: main.py → nlp.py and jokes.py -->
  <line x1="340" y1="200" x2="230" y2="238" stroke="#2563EB" stroke-width="1.5" marker-end="url(#arrBlue)"/>
  <line x1="480" y1="200" x2="590" y2="238" stroke="#2563EB" stroke-width="1.5" marker-end="url(#arrBlue)"/>
  <!-- Arrow: main.py → config.py -->
  <line x1="285" y1="165" x2="190" y2="165" stroke="#64748B" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#arrGray)"/>

  <!-- nlp.py node -->
  <rect x="80" y="238" width="200" height="78" rx="8" fill="#1E1E2E" stroke="#06B6D4" stroke-width="1.8"/>
  <text x="180" y="261" font-family="monospace" font-size="12" font-weight="bold" text-anchor="middle" fill="#06B6D4">nlp.py</text>
  <text x="180" y="277" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">process_with_nlp(text)</text>
  <text x="180" y="291" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">Groq → Gemini Gen1</text>
  <text x="180" y="305" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">→ Gemini Gen2 → fallback</text>

  <!-- jokes.py node -->
  <rect x="540" y="238" width="200" height="78" rx="8" fill="#1E1E2E" stroke="#7C3AED" stroke-width="1.8"/>
  <text x="640" y="261" font-family="monospace" font-size="12" font-weight="bold" text-anchor="middle" fill="#7C3AED">jokes.py</text>
  <text x="640" y="277" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">DadJokeService</text>
  <text x="640" y="291" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">maybe_send_joke()</text>
  <text x="640" y="305" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">cooldown · daily cap</text>

  <!-- keepalive.py node -->
  <rect x="330" y="238" width="160" height="78" rx="8" fill="#1E1E2E" stroke="#2563EB" stroke-width="1.8"/>
  <text x="410" y="261" font-family="monospace" font-size="12" font-weight="bold" text-anchor="middle" fill="#2563EB">keepalive.py</text>
  <text x="410" y="277" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">Flask GET /</text>
  <text x="410" y="291" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">port 8080</text>
  <text x="410" y="305" font-family="monospace" font-size="9" text-anchor="middle" fill="#94A3B8">uptime monitoring</text>
  <line x1="410" y1="200" x2="410" y2="238" stroke="#64748B" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#arrGray)"/>

  <!-- config.py node -->
  <rect x="20" y="152" width="160" height="52" rx="8" fill="#1E1E2E" stroke="#64748B" stroke-width="1.5"/>
  <text x="100" y="174" font-family="monospace" font-size="11" font-weight="bold" text-anchor="middle" fill="#94A3B8">config.py</text>
  <text x="100" y="190" font-family="monospace" font-size="9" text-anchor="middle" fill="#64748B">API keys · settings</text>
  <text x="100" y="202" font-family="monospace" font-size="9" text-anchor="middle" fill="#64748B">TRIGGER_WORDS</text>

  <!-- External APIs row -->
  <!-- Groq -->
  <rect x="30" y="354" width="160" height="76" rx="8" fill="#1E1E2E" stroke="#7C3AED" stroke-width="1.5" stroke-dasharray="5,3"/>
  <text x="110" y="378" font-family="monospace" font-size="11" font-weight="bold" text-anchor="middle" fill="#7C3AED">Groq API</text>
  <text x="110" y="394" font-family="monospace" font-size="9" text-anchor="middle" fill="#64748B">Llama-4 Scout</text>
  <text x="110" y="408" font-family="monospace" font-size="9" text-anchor="middle" fill="#64748B">Primary AI reply</text>

  <!-- Gemini Gen1 -->
  <rect x="215" y="354" width="160" height="76" rx="8" fill="#1E1E2E" stroke="#2563EB" stroke-width="1.5" stroke-dasharray="5,3"/>
  <text x="295" y="378" font-family="monospace" font-size="11" font-weight="bold" text-anchor="middle" fill="#2563EB">Gemini Gen1</text>
  <text x="295" y="394" font-family="monospace" font-size="9" text-anchor="middle" fill="#64748B">Flash Lite</text>
  <text x="295" y="408" font-family="monospace" font-size="9" text-anchor="middle" fill="#64748B">1st fallback</text>

  <!-- Gemini Gen2 -->
  <rect x="400" y="354" width="160" height="76" rx="8" fill="#1E1E2E" stroke="#06B6D4" stroke-width="1.5" stroke-dasharray="5,3"/>
  <text x="480" y="378" font-family="monospace" font-size="11" font-weight="bold" text-anchor="middle" fill="#06B6D4">Gemini Gen2</text>
  <text x="480" y="394" font-family="monospace" font-size="9" text-anchor="middle" fill="#64748B">2.5 Flash Lite</text>
  <text x="480" y="408" font-family="monospace" font-size="9" text-anchor="middle" fill="#64748B">2nd fallback</text>

  <!-- icanhazdadjoke -->
  <rect x="585" y="354" width="210" height="76" rx="8" fill="#1E1E2E" stroke="#7C3AED" stroke-width="1.5" stroke-dasharray="5,3"/>
  <text x="690" y="378" font-family="monospace" font-size="11" font-weight="bold" text-anchor="middle" fill="#7C3AED">icanhazdadjoke</text>
  <text x="690" y="394" font-family="monospace" font-size="9" text-anchor="middle" fill="#64748B">Live joke API</text>
  <text x="690" y="408" font-family="monospace" font-size="9" text-anchor="middle" fill="#64748B">HTTP GET</text>

  <!-- Arrows: nlp.py → external APIs -->
  <line x1="180" y1="316" x2="110" y2="354" stroke="#06B6D4" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#arrCyan)"/>
  <line x1="180" y1="316" x2="295" y2="354" stroke="#06B6D4" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#arrCyan)"/>
  <line x1="180" y1="316" x2="450" y2="354" stroke="#06B6D4" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#arrCyan)"/>

  <!-- Arrow: jokes.py → icanhazdadjoke -->
  <line x1="640" y1="316" x2="690" y2="354" stroke="#7C3AED" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#arr)"/>

  <!-- Legend -->
  <line x1="22" y1="448" x2="42" y2="448" stroke="#7C3AED" stroke-width="2"/>
  <text x="47" y="452" font-family="monospace" font-size="9" fill="#64748B">data flow</text>
  <line x1="120" y1="448" x2="140" y2="448" stroke="#64748B" stroke-width="1.5" stroke-dasharray="4,3"/>
  <text x="145" y="452" font-family="monospace" font-size="9" fill="#64748B">config/init</text>
  <line x1="220" y1="448" x2="240" y2="448" stroke="#06B6D4" stroke-width="1.2" stroke-dasharray="4,3"/>
  <text x="245" y="452" font-family="monospace" font-size="9" fill="#64748B">external calls</text>
</svg>
